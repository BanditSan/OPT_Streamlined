// B9 Tank Switch for OPT Spaceplane
// Author: JadeOfMaar
// Version 0.9.0; Mar 16, 2018

// Removes dependency on Firespitter.
// OPT Night Mode currently not supported.
// Supports Snacks, TAC, CryoEngines (TAC cockpit options may need to be removed)
// Pending possible absorption of OPT_USI patch


// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// New tank types
B9_TANK_TYPE:NEEDS[!CryoTanks]
{
	name = OPTOX
	tankMass = 0.000625
	tankCost = 0
	RESOURCE
	{
		name = Oxidizer
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[TacLifeSupport]
{
	name = OPTTAC
	tankMass = 0.000625
	tankCost = 0
	RESOURCE
	{
		name = Food
		unitsPerVolume = 0.3414853333333334
	}
	RESOURCE
	{
		name = Water
		unitsPerVolume = 0.2257164444444443
	}
	RESOURCE
	{
		name = Oxygen
		unitsPerVolume = 34.57056355555552
	}
	RESOURCE
	{
		name = Waste
		unitsPerVolume = 0.010752
		percentFilled = 0
	}
	RESOURCE
	{
		name = WasteWater
		unitsPerVolume = 0.099528
		percentFilled = 0
	}
	RESOURCE
	{
		name = CarbonDioxide
		unitsPerVolume =  10.34007
		percentFilled = 0
	}
}

B9_TANK_TYPE:NEEDS[TacLifeSupport]
{
	name = OPTFood
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Food
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[TacLifeSupport]
{
	name = OPTOxygen
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Oxygen
		unitsPerVolume = 100
	}
}
B9_TANK_TYPE:NEEDS[TacLifeSupport]
{
	name = OPTWater
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Water
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTUSI
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Supplies
		unitsPerVolume = 0.96
	}
	RESOURCE
	{
		name = Mulch
		unitsPerVolume = 0.04
		percentFilled = 0
	}
}
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTFTZ
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Fertilizer
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[SnacksUtils]
{
	name = OPTSnacks
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Snacks
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[SnacksUtils]
{
	name = OPTSoil
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Snacks
		unitsPerVolume = 0.5
	}
	RESOURCE
	{
		name = Soil
		unitsPerVolume = 0.5
		percentFilled = 0
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Cockpits
@PART[mk3Cockpit_Airliner]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.16
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 288
	}
}

@PART[a_cockpit]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {} 
	!RESOURCE[MonoPropellant] {} 
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.25
}

@PART[b_cockpit]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[b_cockpit_qs]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {} 
	!RESOURCE[MonoPropellant] {} 
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}    
	RESOURCE
	{
		name = ElectricCharge
		amount = 1500
		maxAmount = 1500
	}
	%RESOURCE[IntakeAir]
	{
		%amount = 5
		%maxAmount = 5
	}
	%RESOURCE[IntakeAtm]
	{
		%amount = 5
		%maxAmount = 5
	}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[i_4m_cockpit_isp|phoenix_cockpit|ils_cockpitv2]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    RESOURCE
	{
		name = ElectricCharge
		amount = 800
		maxAmount = 800
	}
	// capacityFactor = 0.12
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 216
	}
}

@PART[j_cockpit|j_cockpitv2|j_cockpit_qs_no_intake]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[j_cockpit_qs|j_6m_cockpit]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	%RESOURCE[IntakeAir]
	{
		%amount = 5
		%maxAmount = 5
	}
	%RESOURCE[IntakeAtm]
	{
		%amount = 5
		%maxAmount = 5
	}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[k_10m_cockpit|k_10m_cockpit_legacy|k_10m_cockpit_custom]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    %RESOURCE[IntakeAir]
	{
		%amount = 6
		%maxAmount = 6
	}
	%RESOURCE[IntakeAtm]
	{
		%amount = 6
		%maxAmount = 6
	}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[l_8m_cockpit]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 2000
		maxAmount = 2000
	}
	
	%RESOURCE[IntakeAir]
	{
		%amount = 6
		%maxAmount = 6
	}
	
	%RESOURCE[IntakeAtm]
	{
		%amount = 6
		%maxAmount = 6
	}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcmd
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Labs
@PART[j_4m_lab|b_4m_lab]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	
	// capacityFactor = 0.6
	// MODULE
	// {
		// name = ModuleB9PartSwitch
		// moduleID = OPTlab
		// switcherDescription = Tank Switch
		// switchInFlight = True
		// baseVolume = 1080
	// }
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Bays and Tails
@PART[j_4m_cargo|j_4m_service|i_4m_tail|b_engineMount_4|j_engineMount_4|k_3m_tricoupler]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[k_3m_fuselage|kh_3m_fuselage|k_3m_cargo|kh_3m_cargo|kh_7m_cargoTail_variant]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}
@PART[kh_6m_cargo|kh_6m_fuselage|k_6m_cargo|k_6m_fuselage|l_6m_cargo|l_6m_fuselage]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}    
	// capacityFactor = 1.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 2520
	}
}
@PART[b_4m_tail|c_6m_cargoTail|j_5m_tail|j_deploymentBay|k_7m_cargoTail_variant]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcargo
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 720
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Cabins
@PART[h_3m_crew_mm|h_3m_crew_fm]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcabin
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[j_4m_crew]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcabin
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[l_6m_crew]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
    // capacityFactor = 1.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTcabin
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 2520
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Tanks
@PART[ab_3m_adaptor]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.8
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1440
	}
}

@PART[h_2m_em_mm|h_2m_em_fm|h_2m_nose_mm|h_2m_nose_fm]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.16
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 288
	}
}

@PART[h_3m_fuel_mm|h_3m_fuel_fm]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.44
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 792
	}
}

@PART[h_4m_nose_mm|h_4m_nose_fm]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.48
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 864
	}
}
@PART[mk2_nose_opt]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.2
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 360
	}
}

@PART[b2_adaptor|b_2m_bicoupler|b2_4m_adaptor_variant|ij_adaptor|ij_4m_adaptor_variant|j_2m_bicoupler|mk2b_adaptor|mk2j_adaptor]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[FSmeshSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

@PART[j_2m_tanks]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.7
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1260
	}
}
@PART[b_4m_tanks|c_6m_cargo|c_6m_tanks|j_4m_tanks|jl_3m_adaptor]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 1.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 2520
	}
}
@PART[a_cockpit_adaptor]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	
	RESOURCE
	{
		name = ElectricCharge
		amount = 2000
		maxAmount = 2000
	}	
	%RESOURCE[IntakeAir]
	{
		%amount = 6
		%maxAmount = 6
	}
	%RESOURCE[IntakeAtm]
	{
		%amount = 6
		%maxAmount = 6
	}
	// capacityFactor = 1.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 2520
	}
}

@PART[j_docking_port]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.32
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 576
	}
}
@PART[j_large_docking_port|j_5m_nose]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 720
	}
}
@PART[c_2m_bicoupler|jk_3m_adaptor|k_2m_bicoupler|k_3m_fuelTank|l_3m_bicoupler]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 1.2
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 2160
	}
}
@PART[ab_7m_adaptor|jk_7m_adaptor|jl_7m_adaptor]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 2.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 4320
	}
}
@PART[a_6m_tanks|k_6m_fuelTank]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 2.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTbody
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 4680
	}
}
// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Wings
@PART[opt_wing_a]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.32
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 576
	}
}
@PART[opt_pylon_a]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 1
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1800
	}
}
@PART[opt_wing_b|opt_pylon_b]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.4
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 720
	}
}
@PART[opt_wing_c]:FOR[OPT_Legacy]
{
	!RESOURCE[ElectricCharge] {}
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	// capacityFactor = 0.6
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTwing
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1080
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Inline SAS
@PART[k_oms_hollow|kh_oms_hollow]:FOR[OPT_Legacy]
{
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	
	%RESOURCE[ElectricCharge]
	{
		%amount = 2000
		%maxAmount = 2000
	}
	// capacityFactor = 0.32
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTSAS
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 576
	}
}

@PART[k_oms|l_oms_hollow]:FOR[OPT_Legacy]
{
	!RESOURCE[LiquidFuel] {}
	!RESOURCE[Oxidizer] {}
	!RESOURCE[MonoPropellant] {}
	!MODULE[FSfuelSwitch] {}
	!MODULE[InterstellarFuelSwitch] {}
	
	%RESOURCE[ElectricCharge]
	{
		%amount = 2000
		%maxAmount = 2000
	}
	// capacityFactor = 0.7
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTSAS
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 1260
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Drop Tanks
@PART[OPTdropTank]:FOR[OPT_Legacy]
{
	!RESOURCE,* {}
	!MODULE[FSmeshSwitch] {}
	!MODULE[FSfuelSwitch] {}
	// capacityFactor = 0.15
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTdrop
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 270
	}
}
@PART[OPTdropTank2]:FOR[OPT_Legacy]
{
	!RESOURCE,* {}
	!MODULE[FSmeshSwitch] {}
	!MODULE[FSfuelSwitch] {}
	// capacityFactor = 0.3
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = OPTdrop
		switcherDescription = Tank Switch
		switchInFlight = True
		baseVolume = 540
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Apply subtypes

@PART:HAS[#manufacturer[OPT*Division],@MODULE[ModuleB9PartSwitch]]:FOR[OPT_Legacy]
{
	// Cockpits 
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcmd]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LiquidFuel + Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = MonoPropellant
			title = MonoPropellant
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTTAC
			tankType = OPTTAC
			title = TAC Supply
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTFood
			tankType = OPTFood
			title = Food
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTOxygen
			tankType = OPTOxygen
			title = Oxygen
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTWater
			tankType = OPTWater
			title = Water
		}
		SUBTYPE:NEEDS[USILifeSupport]
		{
			name = OPTUSI
			tankType = OPTUSI
			title = Supplies
		}
		SUBTYPE:NEEDS[USILifeSupport]
		{
			name = OPTFTZ
			tankType = OPTFTZ
			title = Fertilizer
		}
		SUBTYPE:NEEDS[SnacksUtils]
		{
			name = OPTSnacks
			tankType = OPTSnacks
			title = Snacks
		}
		SUBTYPE:NEEDS[SnacksUtils]
		{
			name = OPTSoil
			tankType = OPTSoil
			title = Soil
		}
	}
	
	// Wings
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTwing]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LiquidFuel + Oxidizer
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = LH2
			tankType = LH2
			title = LqdHydrogen
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = Hydrolox
			tankType = LH2O
			title = LqdHydrogen + Oxidizer
		}
	}
	
	// Cabins
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcabin]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LiquidFuel + Oxidizer
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = LH2
			tankType = LH2
			title = LqdHydrogen
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = Hydrolox
			tankType = LH2O
			title = LqdHydrogen + Oxidizer
		}
	}
	
	// Majority body parts
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTbody]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LiquidFuel + Oxidizer
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = LH2
			tankType = LH2
			title = LqdHydrogen
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = Hydrolox
			tankType = LH2O
			title = LqdHydrogen + Oxidizer
		}
	}
	// Labs
	// @MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTlab]]
	// {
		// SUBTYPE
		// {
			// name = LF
			// tankType = LiquidFuel
			// title = LiquidFuel
		// }
		// SUBTYPE
		// {
			// name = LFO
			// tankType = LFO
			// title = LiquidFuel + Oxidizer
		// }
		// SUBTYPE:NEEDS[CryoTanks]
		// {
			// name = LH2
			// tankType = LH2
			// title = LqdHydrogen
		// }
		// SUBTYPE:NEEDS[CryoTanks]
		// {
			// name = Hydrolox
			// tankType = LH2O
			// title = LqdHydrogen + Oxidizer
		// }
	// }
	
	// Cargo bays, hollow parts, ramps, engine mounts and tails
	// Add non-propellant subtypes here
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcargo]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LiquidFuel + Oxidizer
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = LH2
			tankType = LH2
			title = LqdHydrogen
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = Hydrolox
			tankType = LH2O
			title = LqdHydrogen + Oxidizer
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTTAC
			tankType = OPTTAC
			title = TAC Supply
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTFood
			tankType = OPTFood
			title = Food
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTOxygen
			tankType = OPTOxygen
			title = Oxygen
		}
		SUBTYPE:NEEDS[TacLifeSupport]
		{
			name = OPTWater
			tankType = OPTWater
			title = Water
		}
		SUBTYPE:NEEDS[SnacksUtils]
		{
			name = OPTSnacks
			tankType = OPTSnacks
			title = Snacks
		}
		SUBTYPE:NEEDS[SnacksUtils]
		{
			name = OPTSoil
			tankType = OPTSoil
			title = Soil
		}
	}
	
	// Drop tanks
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTdrop]]
	{
		SUBTYPE
		{
			name = LF
			tankType = LiquidFuel
			title = LiquidFuel
		}
		SUBTYPE
		{
			name = OX
			tankType = OPTOX
			title = Oxidizer
		}
		SUBTYPE:NEEDS[CryoTanks]
		{
			name = LH2
			tankType = LH2
			title = LqdHydrogen
		}
	}
	
	// Inline SAS parts
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTSAS]]
	{
		SUBTYPE
		{
			name = LFO
			tankType = LFO
			title = LiquidFuel + Oxidizer
		}
		SUBTYPE
		{
			name = MO
			tankType = MonoPropellant
			title = MonoPropellant
		}
	}
}