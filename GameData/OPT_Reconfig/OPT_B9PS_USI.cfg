// B9 Tank Switch for OPT Spaceplane
// Author: JadeOfMaar
// Version 0.9.0; Mar 16, 2018

// Removes dependency on Firespitter.
// OPT Night Mode currently not supported.
// Supports Snacks, TAC, CryoEngines (TAC cockpit options may need to be removed)
// Pending possible absorption of OPT_USI patch


// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// New tank types
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTSUP
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Supplies
		unitsPerVolume = 0.96
	}
	RESOURCE
	{
		name = Mulch
		unitsPerVolume = 0.04
		percentFilled = 0
	}
}
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTFTZ
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Fertilizer
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTGYP
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Gypsum
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTMIN
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Minerals
		unitsPerVolume = 1
	}
}
B9_TANK_TYPE:NEEDS[USILifeSupport]
{
	name = OPTORE
	tankMass = 0.000625
	tankCost = 0.0
	RESOURCE
	{
		name = Ore
		unitsPerVolume = 0.2
	}
}

// =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  =  
// Apply subtypes

@PART:HAS[#manufacturer[OPT*Division],@MODULE[ModuleB9PartSwitch]]:FOR[OPT_Reconfig]:NEEDS[USILifeSupport]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcmd]]
	{
		SUBTYPE
		{
			name = OPTSUP
			tankType = OPTSUP
			title = Supplies
		}
		SUBTYPE
		{
			name = OPTFTZ
			tankType = OPTFTZ
			title = Fertilizer
		}
		SUBTYPE
		{
			name = OPTGYP
			tankType = OPTGYP
			title = Gypsum
		}
		SUBTYPE
		{
			name = OPTMIN
			tankType = OPTMIN
			title = Minerals
		}
		SUBTYPE
		{
			name = OPTORE
			tankType = OPTORE
			title = Ore
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcabin]]
	{
		SUBTYPE
		{
			name = OPTSUP
			tankType = OPTSUP
			title = Supplies
		}
		SUBTYPE
		{
			name = OPTFTZ
			tankType = OPTFTZ
			title = Fertilizer
		}
		SUBTYPE
		{
			name = OPTGYP
			tankType = OPTGYP
			title = Gypsum
		}
		SUBTYPE
		{
			name = OPTMIN
			tankType = OPTMIN
			title = Minerals
		}
		SUBTYPE
		{
			name = OPTORE
			tankType = OPTORE
			title = Ore
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[OPTcargo]]
	{
		SUBTYPE
		{
			name = OPTSUP
			tankType = OPTSUP
			title = Supplies
		}
		SUBTYPE
		{
			name = OPTFTZ
			tankType = OPTFTZ
			title = Fertilizer
		}
		SUBTYPE
		{
			name = OPTGYP
			tankType = OPTGYP
			title = Gypsum
		}
		SUBTYPE
		{
			name = OPTMIN
			tankType = OPTMIN
			title = Minerals
		}
		SUBTYPE
		{
			name = OPTORE
			tankType = OPTORE
			title = Ore
		}
	}
}