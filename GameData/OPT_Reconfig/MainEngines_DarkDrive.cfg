// Authored by JadeOfMaar
// OPT Spaceplane Parts Dyno-Tune
// Rebalances OPT engines or makes them reasonably more complicated to use to counter-weigh their powers
// Version 1.0
// April 7, 2018

// Dark Resources
RESOURCE_DEFINITION
{
	name = DarkScience
	displayName = Dark Science
	abbreviation = DI
	density = 0
	flowMode = ALL_VESSEL
	transfer = PUMP
	isTweakable = false
   	isVisible = true
	unitCost = 0
	volume = 1
}

RESOURCE_DEFINITION
{
	name = DarkGoo
	displayName = Dark Goo
	abbreviation = GU
	density = 0
	flowMode = NO_FLOW
	transfer = NONE
	isTweakable = false
   	isVisible = true
	unitCost = 0
	volume = 1
}

// Labs
@PART[j_4m_lab|b_4m_lab]:NEEDS[OPT]
{
	RESOURCE
	{
		name = DarkScience
		amount = 0
		maxAmount = 1050
	}
	
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Dark Goo Science
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		StartActionName = Start Dark Goo Science
		StopActionName = Stop Dark Goo Science
		ToggleActionName = Toggle Dark Goo Science
		
		UseSpecialistBonus = true
		SpecialistEfficiencyFactor = 0.2
		SpecialistBonusBase = 0.05
		UseSpecialistHeatBonus = true
		ExperienceEffect = SpecialExperimentSkill
		EfficiencyBonus = 1
		
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 10
		}
		OUTPUT_RESOURCE
		{
			ResourceName = DarkScience
			Ratio = 0.1
		}
	}
}

// Dark Drive
@PART[engine_darkDrive]:NEEDS[OPT]
{
	!fx_* = nope
	!sound_* = nope
	// @description = After decades of research and experiments on the Mystery Goo, scientest are now able to refine it into 'Dark Goos' and put it in good use. This new type of goo feeds on rocket fuel and produces something much more interesting. Even though Dark Goo is no longer fictional, the failure rate of the refinement procedure is still extremely high, making Dark goos one of the rarest and most expensive substance known to Kerbal kind.
	
	%maxTemp = 2200
	%skinMaxTemp = 2700
	
	@MODULE[ModuleEnginesFX]
	{
		@engineID = DarkDrive
		%exhaustDamageMultiplier = 2000
		%exhaustDamageMaxRange = 0.5
		%exhaustDamageDistanceOffset = 0.1
		PROPELLANT
		{
			name = DarkGoo
			ratio = 0.01
		}
		@atmosphereCurve
		{
			!key,* = nope
			key = 0 3000 0 0
		}
	}
	
	RESOURCE
	{
		name = DarkGoo
		amount = 100
		maxAmount = 100
	}
	
	MODULE
	{
		name = ModuleResourceConverter
		AlwaysActive = true
		ConverterName = Degeneracy
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		INPUT_RESOURCE
		{
			ResourceName = DarkGoo
			Ratio = 0.00005
		}
		OUTPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 1.5
			DumpExcess = true
		}
	}
	MODULE
	{
		name = ModuleResourceConverter
		ConverterName = Regeneration
		AutoShutdown = false
		GeneratesHeat = false
		UseSpecialistBonus = false
		StartActionName = Start Regeneration
		StopActionName = Stop Regeneration
		ToggleActionName = Toggle Regeneration
		INPUT_RESOURCE
		{
			ResourceName = ElectricCharge
			Ratio = 20
		}
		INPUT_RESOURCE
		{
			ResourceName = DarkScience
			Ratio = 0.01
		}
		INPUT_RESOURCE
		{
			ResourceName = Ore
			Ratio = 0.001
		}
		OUTPUT_RESOURCE
		{
			ResourceName = DarkGoo
			Ratio = 0.0005
		}
	}
}